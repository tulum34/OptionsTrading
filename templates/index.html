<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Options Trading Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">OPTIONSTRADING</h1>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">DASHBOARD</div>
                    <div class="nav-item active">
                        <span>Overview</span>
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">PORTFOLIO</div>
                    <div class="nav-item">
                        <span>Greeks</span>
                    </div>
                    <div class="nav-item">
                        <span>Positions</span>
                    </div>
                    <div class="nav-item">
                        <span>Risk Metrics</span>
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">EXCHANGES</div>
                    <div class="nav-item">
                        <span>Binance</span>
                    </div>
                    <div class="nav-item">
                        <span>Bybit</span>
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">TOOLS</div>
                    <div class="nav-item">
                        <span>Calculators</span>
                    </div>
                    <div class="nav-item">
                        <span>Analytics</span>
                    </div>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="status-info">
                    <div class="status-indicator">
                        <span class="status-dot"></span>
                        <span id="connection-status">Connecting...</span>
                    </div>
                    <div id="last-update" class="last-update">Last Update: --</div>
                </div>
                <div class="footer-links">
                    <div>Data Status</div>
                    <div>¬© 2026 optionstrading.com</div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Header Bar -->
            <header class="top-header">
                <div class="header-left">
                    <h2>Portfolio Dashboard</h2>
                </div>
                <div class="header-right">
                    <button class="action-btn primary" id="hedge-btn">
                        üõ°Ô∏è Hedge Now
                    </button>
                    <button class="action-btn secondary" id="refresh-btn">
                        üîÑ Refresh
                    </button>
                </div>
            </header>

            <!-- Risk Metrics Section -->
            <section class="dashboard-section">
                <h3 class="section-title">Risk Metrics</h3>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Delta Exposure</div>
                        <div class="metric-value" id="delta-exposure">0.00</div>
                        <div class="metric-status" id="delta-exposure-status">üü°</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Hedge Position</div>
                        <div class="hedge-details">
                            <div>BTC: <span id="hedge-btc">0.00</span></div>
                            <div>ETH: <span id="hedge-eth">0.00</span></div>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Net Risk</div>
                        <div class="metric-value" id="net-risk">$0.00</div>
                        <div class="metric-subtitle">Margin: <span id="margin-used">0%</span></div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Daily P&L</div>
                        <div class="metric-value" id="daily-pnl">$0.00</div>
                        <div class="metric-subtitle" id="daily-pnl-pct">0.00%</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Portfolio Value</div>
                        <div class="metric-value" id="portfolio-value">$0.00</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Hedge Ratio</div>
                        <div class="metric-value" id="hedge-ratio">0%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="hedge-ratio-progress"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Portfolio Greeks Section -->
            <section class="dashboard-section">
                <h3 class="section-title">Portfolio Greeks Overview</h3>
                
                <!-- BTC Greeks -->
                <div class="greeks-container">
                    <h4 class="asset-header">BTC</h4>
                    <div class="greeks-grid">
                        <div class="greek-card" id="btc-delta">
                            <div class="greek-label">Delta</div>
                            <div class="greek-value" id="btc-delta-value">0.00</div>
                            <div class="greek-status" id="btc-delta-status">üü°</div>
                        </div>
                        
                        <div class="greek-card" id="btc-gamma">
                            <div class="greek-label">Gamma</div>
                            <div class="greek-value" id="btc-gamma-value">0.00</div>
                            <div class="greek-status" id="btc-gamma-status">üü°</div>
                        </div>
                        
                        <div class="greek-card" id="btc-theta">
                            <div class="greek-label">Theta</div>
                            <div class="greek-value" id="btc-theta-value">0.00</div>
                            <div class="greek-status" id="btc-theta-status">üü°</div>
                        </div>
                        
                        <div class="greek-card" id="btc-vega">
                            <div class="greek-label">Vega</div>
                            <div class="greek-value" id="btc-vega-value">0.00</div>
                            <div class="greek-status" id="btc-vega-status">üü°</div>
                        </div>
                    </div>
                </div>

                <!-- ETH Greeks -->
                <div class="greeks-container">
                    <h4 class="asset-header">ETH</h4>
                    <div class="greeks-grid">
                        <div class="greek-card" id="eth-delta">
                            <div class="greek-label">Delta</div>
                            <div class="greek-value" id="eth-delta-value">0.00</div>
                            <div class="greek-status" id="eth-delta-status">üü°</div>
                        </div>
                        
                        <div class="greek-card" id="eth-gamma">
                            <div class="greek-label">Gamma</div>
                            <div class="greek-value" id="eth-gamma-value">0.00</div>
                            <div class="greek-status" id="eth-gamma-status">üü°</div>
                        </div>
                        
                        <div class="greek-card" id="eth-theta">
                            <div class="greek-label">Theta</div>
                            <div class="greek-value" id="eth-theta-value">0.00</div>
                            <div class="greek-status" id="eth-theta-status">üü°</div>
                        </div>
                        
                        <div class="greek-card" id="eth-vega">
                            <div class="greek-label">Vega</div>
                            <div class="greek-value" id="eth-vega-value">0.00</div>
                            <div class="greek-status" id="eth-vega-status">üü°</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Order Placement Section -->
            <section class="dashboard-section">
                <h3 class="section-title">Place Order</h3>
                <div class="order-form-container">
                    <form id="order-form" class="order-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="order-exchange">Exchange</label>
                                <select id="order-exchange" name="exchange" required>
                                    <option value="binance">Binance</option>
                                    <option value="bybit">Bybit</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="order-symbol">Symbol</label>
                                <input type="text" id="order-symbol" name="symbol" placeholder="BTC/USDT" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="order-side">Side</label>
                                <select id="order-side" name="side" required>
                                    <option value="buy">Buy</option>
                                    <option value="sell">Sell</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="order-type">Order Type</label>
                                <select id="order-type" name="type" required>
                                    <option value="market">Market</option>
                                    <option value="limit">Limit</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="order-amount">Amount</label>
                                <input type="number" id="order-amount" name="amount" step="0.001" placeholder="0.001" required>
                            </div>
                            
                            <div class="form-group" id="price-group" style="display: none;">
                                <label for="order-price">Price</label>
                                <input type="number" id="order-price" name="price" step="0.01" placeholder="0.00">
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="action-btn primary">Place Order</button>
                            <button type="button" class="action-btn secondary" id="reset-order-form">Reset</button>
                        </div>
                        
                        <div id="order-result" class="order-result"></div>
                    </form>
                </div>
            </section>

            <!-- Positions Section -->
            <section class="dashboard-section">
                <h3 class="section-title">Positions</h3>
                <div class="positions-container">
                    <div class="positions-column">
                        <h4 class="exchange-header">üìä Binance</h4>
                        <table class="positions-table">
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Type</th>
                                    <th>Qty</th>
                                    <th>Delta</th>
                                    <th>Gamma</th>
                                    <th>P&L</th>
                                </tr>
                            </thead>
                            <tbody id="binance-positions">
                                <tr>
                                    <td colspan="6" class="loading">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="positions-column">
                        <h4 class="exchange-header">üìä Bybit</h4>
                        <table class="positions-table">
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Type</th>
                                    <th>Qty</th>
                                    <th>Delta</th>
                                    <th>Gamma</th>
                                    <th>P&L</th>
                                </tr>
                            </thead>
                            <tbody id="bybit-positions">
                                <tr>
                                    <td colspan="6" class="loading">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Recent Activity Section -->
            <section class="dashboard-section">
                <h3 class="section-title">Recent Activity</h3>
                <div class="activity-log" id="activity-log">
                    <div class="activity-item">
                        <span class="activity-time">--:--:--</span>
                        <span class="activity-desc">Waiting for updates...</span>
                        <span class="activity-status">‚ÑπÔ∏è</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
